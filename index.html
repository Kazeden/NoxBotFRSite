<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NoxStream Experience</title>
<style>
  :root {
    --color-bg: #0A0F1C;
    --color-violet: #A78BFA;
    --color-green: #4ADE80;
    --color-gray: #9CA3AF;
    --color-gold: #FFD700;
    --color-white: #F5F5F5;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: var(--color-bg);
    color: var(--color-white);
    padding: 2rem;
  }
  h1, h2 {
    text-align: center;
    margin-bottom: 1.5rem;
  }
  h2 {
    border-bottom: 2px solid var(--color-gray);
    padding-bottom: 0.5rem;
  }
  .section {
    margin: 3rem 0;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1rem;
  }
  .btn {
    padding: 1.2rem;
    font-size: 1rem;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    color: var(--color-bg);
    font-weight: bold;
  }
  .btn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 12px var(--color-gold);
  }
  .bonus .btn {
    background: var(--color-green);
  }
  .malus .btn {
    background: var(--color-violet);
    color: white;
  }
  .malusSub .btn {
    background: var(--color-gold);
    color: black;
  }
  #nuit-timer {
    text-align: center;
    font-size: 1.5rem;
    margin-top: 1rem;
    color: var(--color-gold);
    font-weight: bold;
  }
  #status {
    position: fixed;
    bottom: 8px; right: 8px;
    font-size: 0.85rem;
    color: var(--color-gray);
  }
</style>
</head>
<body>
  <h1>NoxStream Experience üåï‚ú®</h1>

  <div class="section bonus">
    <h2>üéÅ Bonus (Points de cha√Æne)</h2>
    <div class="grid">
      <button class="btn" onclick="sendCommand('!focus')">Concentration</button>
      <button class="btn" onclick="sendCommand('!boost')">Boost de vitesse</button>
    </div>
  </div>

  <div class="section malus">
    <h2>‚ò†Ô∏è Malus (Points de cha√Æne)</h2>
    <div class="grid">
      <button class="btn" onclick="sendCommand('!tourne')">Tourne sur toi-m√™me</button>
      <button class="btn" onclick="sendCommand('!micro')">Coupure micro</button>
      <button class="btn" onclick="sendCommand('!sideLight')">√âclairage c√¥t√©s (2 min)</button>
      <button class="btn" onclick="sendCommand('!oneLamp')">Une seule lampe (2 min)</button>
      <button class="btn" onclick="sendCommand('!attache')">Attach√©s jambe (2 min)</button>
    </div>
  </div>

  <div class="section malusSub">
    <h2>‚ö° Nuit Totale (Sub uniquement)</h2>
    <div class="grid">
      <button class="btn" onclick="sendCommand('!nuit')">üåë Nuit totale (2 min +2 min/sub)</button>
    </div>
    <div id="nuit-timer">Timer Nuit Totale : 0:00</div>
  </div>

  <div id="status">Connexion au serveur...</div>

  <script>
    const statusEl = document.getElementById('status');
    const timerEl = document.getElementById('nuit-timer');

    // Connexion WebSocket (modifie l'URL selon ton serveur)
    const ws = new WebSocket('ws://localhost:3000');

    ws.onopen = () => {
      statusEl.textContent = 'Connect√© au serveur.';
      statusEl.style.color = 'var(--color-green)';
    };

    ws.onclose = () => {
      statusEl.textContent = 'D√©connect√© du serveur.';
      statusEl.style.color = 'var(--color-violet)';
    };

    ws.onerror = (err) => {
      statusEl.textContent = 'Erreur de connexion.';
      statusEl.style.color = 'var(--color-gold)';
      console.error('WebSocket error:', err);
    };

    ws.onmessage = (msg) => {
      const data = JSON.parse(msg.data);
      if (data.type === 'nuit-timer') {
        updateTimer(data.seconds);
      }
    };

    function sendCommand(cmd) {
      if (ws.readyState === WebSocket.OPEN) {
        ws.send(JSON.stringify({ command: cmd }));
        console.log('Commande envoy√©e:', cmd);
      } else {
        alert('Pas connect√© au serveur.');
      }
    }

    function updateTimer(seconds) {
      const m = Math.floor(seconds / 60);
      const s = seconds % 60;
      timerEl.textContent = `Timer Nuit Totale : ${m}:${s.toString().padStart(2, '0')}`;
    }
  </script>
</body>
</html>
